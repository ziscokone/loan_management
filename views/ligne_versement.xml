<?xml version="1.0" encoding="UTF-8"?>
<odoo>
    <!-- Vue Liste -->
    <record id="view_ligne_versement_mutual_tree" model="ir.ui.view">
        <field name="name">ligne.versement.tree</field>
        <field name="model">ligne.versement</field>
        <field name="arch" type="xml">
            <tree string="Lignes de versement">
                <field name="employee_id"/>
                <field name="montant_paye"/>
                <!-- <field name="reversement_id"/> -->
                <field name="loan_mutual_id"/>
                <field name="create_uid" string="Créé par"/>
                <field name="create_date" string="Date de création"/>
            </tree>
        </field>
    </record>

    <!-- Vue Recherche -->
    <record id="view_ligne_versement_mutual_search" model="ir.ui.view">
        <field name="name">ligne.versement.search</field>
        <field name="model">ligne.versement</field>
        <field name="arch" type="xml">
            <search>
                <field name="employee_id"/>
                <field name="reversement_id"/>
                <field name="loan_mutual_id"/>
                <separator/>
                <filter string="Mes lignes" name="my_lines" 
                        domain="[('create_uid', '=', uid)]"/>
                <group expand="0" string="Regrouper Par">
                    <filter name="group_by_employee" string="Employé" 
                            context="{'group_by': 'employee_id'}"/>
                    <filter name="group_by_reversement" string="Reversement" 
                            context="{'group_by': 'reversement_id'}"/>
                    <filter name="group_by_loan" string="Demande de prêt" 
                            context="{'group_by': 'loan_mutual_id'}"/>
                </group>
            </search>
        </field>
    </record>

    <!-- Action Window -->
    <record id="action_ligne_versement_mutual" model="ir.actions.act_window">
        <field name="name">Historiques des Prélèvements</field>
        <field name="res_model">ligne.versement</field>
        <field name="view_mode">tree</field>
        <field name="search_view_id" ref="view_ligne_versement_mutual_search"/>
        <field name="help" type="html">
            <p class="o_view_nocontent_smiling_face">
                Aucune Historique de Prélèvement trouvée.
            </p>
        </field>
    </record>

    <!-- Menu Item -->
    <menuitem id="menu_ligne_versement"
              name="Historiques"
              parent="menu_mutual_root"
              action="action_ligne_versement_mutual"
              groups="loan_mutual.super_admin_pret_mutuel,loan_mutual.manager_pret_mutuel"/>
</odoo>